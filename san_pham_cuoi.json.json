{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"e%qD1]=`IlqX:L=6?Xra\">tín hiệu</variable><variable id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</variable><variable id=\"Aq^^h#[(m4?Ii},h_XGG\">gateway_status</variable><variable id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</variable><variable id=\"#_TE7I8}TW8B-8fsh)*7\">DoAmDat_waiting</variable><variable id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</variable><variable id=\"0e0bMV1g{{pk=/|5ozSh\">doAmKK_waiting</variable><variable id=\"qhk1F1!6K|bi]tJPMpnM\">lux_waiting</variable><variable id=\")?Cvo.nVHr0bq%JTdA`R\">LUX</variable><variable id=\"?D`G_bHVDf{m$[[KRZaq\">DoAmDat</variable><variable id=\"I3%ULv9Q+*xAcrz_y/V^\">nhietDo_waiting</variable><variable id=\"^r4JMJQZ};5as(gcjV*j\">FAN</variable><variable id=\"O.KC!X^D!;N8^!(x3QLS\">LUX_send</variable><variable id=\"VfKb2fd%TG]GGe{UX]n9\">DoAmDat_send</variable><variable id=\"o]n%T[EArI|3zl/A`M(i\">LUX_count</variable><variable id=\"QINH+#uuVmkZCOP}uf|M\">DoAmDat_count</variable><variable id=\"EczX!9?.T=`D0cW2n:Cu\">NhietDo</variable><variable id=\"{J65ngVylro]hHXE}Je.\">nhietDo_count</variable><variable id=\"}!p{23tJ2wUGO:jF1hp`\">doAmKK_count</variable><variable id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</variable><variable id=\"5aa_ERIFR7NPPoeRsEHJ\">NhietDo_send</variable><variable id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</variable><variable id=\"j@08+GlVqdfOs6eE.jP$\">DoAmKK_send</variable><variable id=\"pAEpYKcKGV,5|7LnRDC5\">DoAmKK</variable></variables><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"-962\" y=\"-1288\"><statement name=\"ONSTART\"><block type=\"yolobit_basic_scroll_text\" id=\"N2*C/3[t%Aap6cVk~+)R\"><value name=\"message\"><shadow type=\"text\" id=\"/5QFOWxHcBdf/|%NVaVa\"><field name=\"TEXT\">IoT</field></shadow></value><next><block type=\"variables_set\" id=\"aF7lm?a4.-OaJy%$x.z,\"><field name=\"VAR\" id=\"#_TE7I8}TW8B-8fsh)*7\">DoAmDat_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"wg,z?S~HNQyr0/(Gj6]I\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"en?FLM38R]TA^mmz_ZWs\"><field name=\"VAR\" id=\"0e0bMV1g{{pk=/|5ozSh\">doAmKK_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"+!~YeY?{.:3Zm$VV{5Su\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"!E`wacxf,)@i3h=B#B]Q\"><field name=\"VAR\" id=\"I3%ULv9Q+*xAcrz_y/V^\">nhietDo_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"9i,=@III|kdm}?S9=`CM\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"~VwBXer0`yWhnfGsBW|d\"><field name=\"VAR\" id=\"qhk1F1!6K|bi]tJPMpnM\">lux_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"^B-Afe[YIl/#P2cHjRfQ\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"(!Csl:8(,W1GZ)%zQ6Dm\"><field name=\"VAR\" id=\"o]n%T[EArI|3zl/A`M(i\">LUX_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"mv@cYMqPw^$=;~KzJn(D\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"$4Ll?$QJO,e/a2Aq!`(|\"><field name=\"VAR\" id=\"QINH+#uuVmkZCOP}uf|M\">DoAmDat_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\";h/Kt[vjMfl#Zk@EP(W]\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"}WUpOa}B*~}TveHk8QO%\"><field name=\"VAR\" id=\"}!p{23tJ2wUGO:jF1hp`\">doAmKK_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\".7D/Ikca6o2fAa0V[C1Q\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"HH(T(4j)9Y##)+GDqLmv\"><field name=\"VAR\" id=\"{J65ngVylro]hHXE}Je.\">nhietDo_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"Yd$6y^c?A19)Hpc]z7We\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"8nQdz`_nl|B6yRT7b(bD\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"h-TeCI`zx~)S+qmo3]mp\"><field name=\"TEXT\">0</field></block></value><next><block type=\"variables_set\" id=\"KcU/hJ]RSX/N0F(EhphG\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field><value name=\"VALUE\"><block type=\"text\" id=\"Cl1=~/;K3B$!R^f|)ZnB\"><field name=\"TEXT\">0</field></block></value><next><block type=\"variables_set\" id=\"T=/~d99Uk%v25~RIE0Yu\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field><value name=\"VALUE\"><block type=\"text\" id=\"?$l,@s-m.EFG61v?|Y1-\"><field name=\"TEXT\">0</field></block></value><next><block type=\"variables_set\" id=\"/AXqVvRy#q)~|!2DPp~2\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"VALUE\"><block type=\"text\" id=\"!aXhEmBajM|E5OC;Yq6!\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"3pPvLaH}qBsLzGgWQd|m\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field><value name=\"VALUE\"><block type=\"text\" id=\"P-(i%RXD+lTC3fnUn`54\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"HF!,|)L,o_9[3^f5f{oE\"><field name=\"VAR\" id=\"Aq^^h#[(m4?Ii},h_XGG\">gateway_status</field><value name=\"VALUE\"><block type=\"text\" id=\"igU~-Ys*FY(g%{5PacJy\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"*B$Q*CXW$ok13)N|MIMR\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field><value name=\"VALUE\"><block type=\"text\" id=\"hFZY_^0OudK#V%_xKfSa\"><field name=\"TEXT\"></field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_events_run\" id=\"GFewP7:WN#I!ti-xbp`;\"><next><block type=\"yolobit_basic_scroll_text\" id=\"!X46`.al7|/VrursVw0F\"><value name=\"message\"><shadow type=\"text\" id=\"0=V9J0v??;DXc)bB2.pG\"><field name=\"TEXT\">O</field></shadow></value><next><block type=\"yolobit_basic_sleep\" id=\"?iyNza0[ta;9,7#91mmS\"><value name=\"duration\"><shadow type=\"math_number\" id=\"=UR0mK|qB0Xy]Ok(JyiZ\"><field name=\"NUM\">10</field></shadow></value></block></next></block></next></block></statement></block><block type=\"aiot_ir_on_receive\" id=\"LtwhIk:/qX67(yrMNf)4\" x=\"-3620\" y=\"-1001\"><field name=\"pin\">pin16</field><field name=\"message\" id=\"e%qD1]=`IlqX:L=6?Xra\">tín hiệu</field><statement name=\"ACTION\"><block type=\"controls_if\" id=\"t1E_H}u-Vh1(][(RfqbW\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\":@it)b[RRv0H$NMArv7}\"><field name=\"pin\">pin16</field><field name=\"remote\">0</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"[!w:J;GCMi[~WH!OY2@K\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"En:0OD=?Xy7d~wbr;q~c\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"=dsNL+cOj!{}i.$ZhUJ|\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"B\"><block type=\"text\" id=\"r26%$9KmDLX$u+[6y(yH\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"zQ~$.UdmwVg(Q$UL@uO:\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"+y#+_#ivD!ZoG^KmIsG%\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"B5z}qJ~H,A6gj@Chpt^o\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"Ukl,1Tq)It7gEUq{!*Dw\"><field name=\"TEXT\">0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"i-NH5wq,l)~zotK[`gRj\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"81Kscj)x71*%k[DHN9/l\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"[[958upW2LFzO?]SCz]T\"><field name=\"TEXT\">!FAN:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"`r3i/G(I!lTL|Jlx7qbQ\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"RMt.]]U{Us^^Ej%5Ccfq\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"Mno|`B=afhLtO3;~t!Bk\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"%HvG@c*|vRE[hZtBD2,Z\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"o*i=TxyA$5f29x]v23)^\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field></block></value><value name=\"B\"><block type=\"text\" id=\"HA7IKP6]p+eXA_Nt{Xh+\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_dual_usb\" id=\"4ioVhEfTuGgD39t`C%,V\"><field name=\"NAME\">pin3</field><value name=\"percent\"><shadow type=\"math_number\" id=\"28N=W77v^?DLip9Y2wP?\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"yolobit_pin_write_digital\" id=\";)iTHXj8N;=R)(t^UemR\"><field name=\"pin\">3</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"3r`/THiC8^?ROS.HB;%b\"><field name=\"value\">0</field></block></value><next><block type=\"variables_set\" id=\"$2bnx]n5@5a,#(*Yt-FE\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field><value name=\"VALUE\"><block type=\"text\" id=\"~0Io-7?vtE?=!;I~F3Wa\"><field name=\"TEXT\">0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"AR{*4@l88xM-bY#B/GF3\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"}38*L.za%+p-Kzk_5Gc_\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"_D~lg1#v0np2a5|%`9Ar\"><field name=\"TEXT\">!PUMP:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"`0SYBR46Uh*]~1xJOTG-\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"kNIt-ES`9x}}6Lakg7@F\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"y^WV33Ns6;irx}52~L0%\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"dAz(Kdk:UY/Cfk9K#^%o\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"x1f-m$`E)huJL:QXp9pC\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field></block></value><value name=\"B\"><block type=\"text\" id=\"?dnIva0e4,~7,h.nbpWh\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"=49U8=@)*E$j~m;^5!`H\"><field name=\"port\">pin10</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\",)uG7m{ZAiIU*d4|5zK`\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"yolobit_pin_write_digital\" id=\"$s]FyVNV0G_o*sR/E|b,\"><field name=\"pin\">10</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"o%|u,kN.(n^C,s@SI,@;\"><field name=\"value\">0</field></block></value><next><block type=\"variables_set\" id=\"}#D2+ib^hh[-y4Z2K$$Y\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field><value name=\"VALUE\"><block type=\"text\" id=\"sLk#PA@Y;lK8*rlRO8TQ\"><field name=\"TEXT\">0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"Jll0`RKT:/h)8@Rhg$bd\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"55*fESb:q}su,YEUpmMd\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"5H:I[+OSHm6hPI_|bO0e\"><field name=\"TEXT\">!LED:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"DI.F[3]geFks;roU%Sjt\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"o0O;e7Odz:`^eF*RDG3m\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"F2G5qLBC$JWPv=.*WBq!\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"Y8k!tBY=UBc1rZ2`5TAq\"><field name=\"pin\">pin16</field><field name=\"remote\">1</field></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"hI:A;8LsvnMH=qN?JL^-\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"cH0C%ussDz/TwA1,l(P^\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"yolobit_basic_sleep\" id=\"[qQxKS#PmA[?~)fwKWo1\"><value name=\"duration\"><shadow type=\"math_number\" id=\"vd3.3DGI}M1Hn6YA-pb.\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"controls_if\" id=\"e=BAP*y#186^-[??5lnz\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"T]9(C=Wa30+o|Z]ei%n~\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"n,Hu8mY~BjBzd2maJ1(M\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"B\"><block type=\"text\" id=\"Xd}OM$)7}IQhye_cM1/|\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"r^mAs,JYAY)g.#085P!y\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"vNg,Ch%=y)6L^tHCe;Oi\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\" id=\"q@lrl}aY8|7~j2_#8R@R\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"ko]{,[^R;ZsRR2yIZwmY\"><field name=\"TEXT\">1</field></block></value></block></next></block></statement><next><block type=\"xbot_serial_write_string\" id=\"R^SE}*h,RfqhH9rQX8k)\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"JZpk;1@AgU6{mT0dLm5j\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"By#q:H.Q)/5DUuwLlm.n\"><field name=\"TEXT\">!FAN:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"!*FRfu^Y5HdJR%1FNN(=\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\";*H-cmGANV~N3?xE[uli\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"is0(RW~)+s.v5;f@b[SG\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"3/vpEKAfG8v0j#x6)oSS\"><field name=\"pin\">pin16</field><field name=\"remote\">2</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"NklPyp!6*3*R)1+.G3T4\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"_Jh-#u`+Vw*}**q+phL-\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"7_Z^hd4iT,iSKwqr.x!,\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"B\"><block type=\"text\" id=\"4?rHjG$+(SLM_24x0JI]\"><field name=\"TEXT\">2</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"HUsYRe*.:ZuuY$;([*YC\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"VyZ`nmBJ_:0rM4).f{Ke\"><field name=\"NUM\">50</field></shadow></value><next><block type=\"variables_set\" id=\"xo=Q;:/_tt47(jnGpCUA\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"*$=P7:M[E~_7jUp;,20%\"><field name=\"TEXT\">2</field></block></value></block></next></block></statement><next><block type=\"xbot_serial_write_string\" id=\"wQ,t8B;?[RnagZ}~%YOv\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"Qc/Su6(k|W*Om3+RnQZV\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"AT)Ix:PADgvUQyF@1C^t\"><field name=\"TEXT\">!FAN:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"bTnE$7RSN]^FTFX,}s$~\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"l4e~eHSA`Kpt|5s3b6y0\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"*3K[b(oE=kT.A$ofJLdG\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"P$+fE+YRmQe6W@g4R45N\"><field name=\"pin\">pin16</field><field name=\"remote\">3</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"T?g.iZ,O3Wsy_*aWTVhV\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"C1d7?ppY.45Sb%;We~oz\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\",VY_-I!7|xxbBV[C//!V\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"B\"><block type=\"text\" id=\"-|yS.uQ,{Ae-qUY{UW/B\"><field name=\"TEXT\">3</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"g1h^5|0P[d!kDv8iBgx?\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"9zO:w%XWZ$%Q1NE7#V%4\"><field name=\"NUM\">75</field></shadow></value><next><block type=\"variables_set\" id=\"T#zKf:Iwp/p+!9Ru~X$o\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"?ya.Zu0Qs]Kw!Ar588vF\"><field name=\"TEXT\">3</field></block></value></block></next></block></statement><next><block type=\"xbot_serial_write_string\" id=\"+J.]b|TDNapZn%!:cr[p\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"rgZxFkNG,`Qw+^D]}ZK5\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"sLD%5)?=UTN)YU__N[_5\"><field name=\"TEXT\">!FAN:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"0^FBI`Jr4dnd%`)bAS$l\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"/^NjAwzE$M!rqQ[2Bawh\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"]lK3:M6*#rK8|%7}8FA^\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"c,)E/ahFqj;53kPb2eX?\"><field name=\"pin\">pin16</field><field name=\"remote\">4</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"SqoxL/|Qkxac=c4F]:rb\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"SHL0H?:@DIw9X18?F3#U\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"YfX#3`76cvayC)qFt~~X\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"B\"><block type=\"text\" id=\"R3P%#J#/F@a`xv[E9NCS\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"5Ekj-MJ$N~[dP^H`eBl|\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"Ny=lSl;8H@NvW1v-e-;p\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"JG2n!f$V(EzP,lY~p^lh\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"8:mOjyPG[*j2M~ca8{8e\"><field name=\"TEXT\">0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"u:ikEmLn`?+|{OE01]rA\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"HLULf@u#37As{CToyn*Z\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"T#Mn7G,*cjn(HYv?y_/m\"><field name=\"TEXT\">!FAN:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"wcI:M%J)Uh%W!=@Bav%8\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"%/.a+z]#OmH=4yPt$l0z\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></next></block></statement></block></statement><next><block type=\"controls_if\" id=\"]}2@LGC`o3F7{MDq76(C\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"]%fYw#5zH|]NYJamt/m~\"><field name=\"pin\">pin16</field><field name=\"remote\">5</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"%#ff0jhS!Zr:*ew)xch@\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"e52BlgRZ,_dZ2_T-F[|0\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"[JaSlP=:*ABm#7kNZtYW\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field></block></value><value name=\"B\"><block type=\"text\" id=\"`/]c^cQKT[e0^1G/0%lf\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_write_digital\" id=\"T*D2;Fw#`#0,~F}c1HK$\"><field name=\"pin\">3</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"I3nhgTzy`U{?qY0Xpua/\"><field name=\"value\">1</field></block></value><next><block type=\"aiot_dual_usb\" id=\"A!;]CIDKLZyJ!JR4U-LD\"><field name=\"NAME\">pin3</field><value name=\"percent\"><shadow type=\"math_number\" id=\"$4!3ZaDsI(COO=}E~Xe-\"><field name=\"NUM\">75</field></shadow></value><next><block type=\"variables_set\" id=\"^NmZ:WuKO9w0|?7z$894\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field><value name=\"VALUE\"><block type=\"text\" id=\"Jf6^*a%iD%:)`k`c.Ev+\"><field name=\"TEXT\">1</field></block></value></block></next></block></next></block></statement><next><block type=\"xbot_serial_write_string\" id=\"%)dfd6A2P;U:tOq9,;8=\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"N%SyhOrXglewTr`-RL`N\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"9(/A|z|:,s|Wcs*EMp7`\"><field name=\"TEXT\">!PUMP:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"1fG=XIMSFGxxOC:U`X$q\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"r_Hj@ScqvT?yJA$#mkJD\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"^3o$280~6EgvWXV_*|3A\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"^1?VS{|[{$Oa#N`ID/v!\"><field name=\"pin\">pin16</field><field name=\"remote\">6</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"Nr~+!gP/B{$jA!7ey,bl\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"0e!@^Pm/!!Zx~SXLX4hs\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"We%Pv%i!M`6r~Vj~7d/V\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field></block></value><value name=\"B\"><block type=\"text\" id=\"T*nZ,eUFDxwXknc@2#=K\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_write_digital\" id=\"%Tt([MBSPg{S|v?vr*IM\"><field name=\"pin\">3</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"y_x2R:nuRIxocXdgVfn[\"><field name=\"value\">0</field></block></value><next><block type=\"aiot_dual_usb\" id=\"xE}D@UgDLD@k9L7va~oF\"><field name=\"NAME\">pin3</field><value name=\"percent\"><shadow type=\"math_number\" id=\"[y/Zv.=h9v5L0,`tfp)}\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"S1(t$[D)u]Xfy#[`Q;j|\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field><value name=\"VALUE\"><block type=\"text\" id=\"Ij{q9W7MC^?7CWYdh-d9\"><field name=\"TEXT\">0</field></block></value></block></next></block></next></block></statement><next><block type=\"xbot_serial_write_string\" id=\"F*J^}6P*B-5N^kbHDf2I\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"n/vHJ#cVK#]]Y!LeBbJd\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"cZdHSxWKK,j:F)XiseH#\"><field name=\"TEXT\">!PUMP:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"p/8!qZOqik!rykuw6G],\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"ML3?5mG$](.CnN(6Ga]]\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"1JrHC_:zTdZ]C.*w2k#2\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"jWG!T|S~-4ti2NT#J~@y\"><field name=\"pin\">pin16</field><field name=\"remote\">7</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"Ngh1ao3F,hCEF-]2P,kE\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"G$6)!i*py5udAw,wI6NO\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"$fx=I+786XCxi3,9i`63\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field></block></value><value name=\"B\"><block type=\"text\" id=\"NOct(|BVO8GTzacQgPuy\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_write_digital\" id=\"b2F31a8Jy::{K=D87mjQ\"><field name=\"pin\">10</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\")V8=qLNE-b4Rih/[8k99\"><field name=\"value\">1</field></block></value><next><block type=\"aiot_led_tiny_set_all\" id=\"vYz`QOj2u07d[9Lw1B8L\"><field name=\"port\">pin10</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"%Ua|~nQPa+4n-,1JjN+b\"><field name=\"COLOUR\">#ff0000</field></shadow></value><next><block type=\"variables_set\" id=\"wzoMmw8gA,zE?gFmIQ1R\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field><value name=\"VALUE\"><block type=\"text\" id=\"@uLW?}@TIvH:lM}g=xb0\"><field name=\"TEXT\">1</field></block></value></block></next></block></next></block></statement><next><block type=\"xbot_serial_write_string\" id=\"N]ov*Is2^:2QD5ac;eQv\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"b1d:Y:]P`FQ0gL,(5-Z#\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"AnXO/,^3F51CoU]rJ~bM\"><field name=\"TEXT\">!LED:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\";_WO07qxQEzTH@k~3%Wt\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"2w`[EO+UT2{Ba?-D?o[u\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"PJ.XC[rmNvoi;nwrJL9b\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"70hSxltkJ7l7{OnVZzbz\"><field name=\"pin\">pin16</field><field name=\"remote\">8</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"F50!ZM_Z`HCp3zHKV7Td\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"1oG.~MK]LR)2%x3P8.l/\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"e):$5w-I~8?7FuslHQq^\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field></block></value><value name=\"B\"><block type=\"text\" id=\"k1E6A!Ha0g-UbVmHT}_(\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"WYCu,@`;XLW0?yGbd~ms\"><field name=\"port\">pin10</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"y3$Vhl%5C^qLQdfZ8JTa\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"yolobit_pin_write_digital\" id=\"UUYN+aw}I{1GqD+@GFx1\"><field name=\"pin\">10</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"s0km%76paM^_mWL;-`RU\"><field name=\"value\">0</field></block></value><next><block type=\"variables_set\" id=\"G-MD:`2OChH[uF6le)~}\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field><value name=\"VALUE\"><block type=\"text\" id=\"RXCT,l@}or~rSxZSAE-_\"><field name=\"TEXT\">0</field></block></value></block></next></block></next></block></statement><next><block type=\"xbot_serial_write_string\" id=\"K@[Be4)h=x_r:gebb5@K\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"dWn{?/C~r0yy5Fi,D+5J\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"Y{xeqqB3hJEByY+HUfJD\"><field name=\"TEXT\">!LED:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"$XTB6tMZvp0}d(cG5e9A\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"~HnH1JVt73Eu8B#B`M-d\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement><next><block type=\"aiot_ir_clear\" id=\"#Y{_TN[|pmr|Xu;.1m,q\"></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"Q;SwlWfLZ|*YEVd)vhoR\" x=\"-63\" y=\"-787\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"WXnKhNxUKat(wu%rbB})\"><field name=\"NUM\">0.3</field></shadow></value><statement name=\"ACTION\"><block type=\"procedures_callnoreturn\" id=\"VRrCRl[InYcg9XRAD*xZ\"><mutation name=\"xuLyLUXwaiting\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"$T!f@it/g0brG^0j-^XW\"><mutation name=\"xuLyDoAmDatwaiting\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"Mk,=o+ib2Gc!N@mm3Rk$\"><mutation name=\"xuLyNhietDowaiting\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"Q@5PNS%m_:/;_?iMSe.q\"><mutation name=\"xuLyDoAmKKwaiting\"></mutation></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"*2B7H9$~Y{FLH@0+GZ9M\" x=\"-563\" y=\"-712\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"w?n`pcIRgQ-[F0JwU9b9\"><field name=\"NUM\">2</field></shadow></value><statement name=\"ACTION\"><block type=\"procedures_callnoreturn\" id=\"+NARJVI5JMCx}R@iBb@g\"><mutation name=\"xuLyLUX\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"[*8ITy`^_Fbr}Uvp=MW6\"><mutation name=\"xuLyDoAmDat\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"C%uoIs-358V?s_S^.u94\"><mutation name=\"xuLyNhietDo_DoAmKK\"></mutation></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"7AP4F{:F?/?I$,f6bn%_\" x=\"-1663\" y=\"-638\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"R=(qYK(eyE;A+6MmMHV{\"><field name=\"NUM\">1</field></shadow></value><statement name=\"ACTION\"><block type=\"text_append\" id=\"js@RxZTM~[LttRZ7Xis~\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field><value name=\"TEXT\"><shadow type=\"text\" id=\"zoCljoet|`mbLdFtFB[5\"><field name=\"TEXT\"></field></shadow><block type=\"yolobit_device_read_terminal\" id=\"F;gD:8riH==uFsaUJ`Ru\"></block></value><next><block type=\"procedures_callnoreturn\" id=\"mgA`QAwko==y{h2Dc|=+\"><mutation name=\"xuLyQueryStatus\"></mutation><next><block type=\"procedures_callnoreturn\" id=\"2-%v)vb5p6E@n~y(jf$]\"><mutation name=\"xuLyYeuCauApp\"></mutation><next><block type=\"variables_set\" id=\"A2J1%[0b,UcYO:^@W4c)\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field><value name=\"VALUE\"><block type=\"text\" id=\"%i~n[pu+R_L!px-G;5*B\"><field name=\"TEXT\"></field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"|qLW.e3sZYFreSHto/S+\" x=\"-2687\" y=\"-562\"><field name=\"NAME\">xuLyQueryStatus</field><comment pinned=\"false\" h=\"80\" w=\"160\">Xử lý các câu hỏi của gateway về status các thiết bị</comment><statement name=\"STACK\"><block type=\"text_append\" id=\"]FL}kq,6WcM0T^pB1OR+\"><field name=\"VAR\" id=\"Aq^^h#[(m4?Ii},h_XGG\">gateway_status</field><value name=\"TEXT\"><shadow type=\"text\" id=\"zoCljoet|`mbLdFtFB[5\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"]vv!@lGRkUT0))gM=*/D\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field></block></value><next><block type=\"controls_if\" id=\"0)Frha3@rt~^oUBZokzv\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"0KGUKaFDN.Wap#x!^+m6\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"D~e)IvBTz=M,w#JETBd3\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"YcD!BX01FwjJ^D_LaGc7\"><field name=\"VAR\" id=\"Aq^^h#[(m4?Ii},h_XGG\">gateway_status</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"534UEP/JXG_]IPhd1c{;\"><field name=\"TEXT\">!FAN:3#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"e]Vu;aE6TfX1DT$ee9Wv\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"xbot_serial_write_string\" id=\"1BT3RedO`X#Z-)#wx,iL\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"N](2]75;2FHUQCK})5cW\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"tfI1{*l{6W~B8yQz5e+`\"><field name=\"TEXT\">!FAN:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"Ga2]G1t{@8y58mk5epIP\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"0Kk.7%Yo+wS)51o|B=gp\"><field name=\"TEXT\">#</field></block></value></block></value></block></statement><next><block type=\"controls_if\" id=\"oNk~tb4U%{Sc8X;b9t/c\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"HtDwbffmm6l,xcB6UA8i\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"MaqI(GxCYYX?P`3Iv|+M\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"~ppo7d5P*v:i1BbBhUYu\"><field name=\"VAR\" id=\"Aq^^h#[(m4?Ii},h_XGG\">gateway_status</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"+0N^|%dsTZ5?O+:JphN6\"><field name=\"TEXT\">!PUMP:3#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"?1wBNpl`u`-re8WuTu3m\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"xbot_serial_write_string\" id=\"vt^j!|$tJp=)~xB^Wo^r\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"(E0o]$V.#QIUcmq![(20\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"XvBJrnq`[3u1[7MLzW=J\"><field name=\"TEXT\">!PUMP:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"Tzbgg4.9@96?OOG4F%Rs\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"d_cuf9Y~/.X6Ck2W:6Sf\"><field name=\"TEXT\">#</field></block></value></block></value></block></statement><next><block type=\"controls_if\" id=\"$TZn+ICS*SF/C.^2!-;A\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"r4GRf|uPP5fw{KK-H+;d\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"OO5V1L%[-#FqF)tZq_Rc\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"bPjeSS!mbtD4IN%(]`8-\"><field name=\"VAR\" id=\"Aq^^h#[(m4?Ii},h_XGG\">gateway_status</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"@$Dj;).1zs?Phff^-3|[\"><field name=\"TEXT\">!LED:3#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"/2Y7]sqS$h*jp/Nm5;WL\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"xbot_serial_write_string\" id=\"/_Gh|lEhqN$h{fr2s7:9\"><value name=\"string\"><shadow type=\"text\" id=\"A-amOZx#K.m%^?jw#6*x\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"z/I_cV5g@e!7C;/@|nYN\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"]q{t38vt17cd*QKO4qrg\"><field name=\"TEXT\">!LED:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"_o1|vTKVzVR).0uuU]*N\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"G0}[{o#z`y3S;d%f-gFW\"><field name=\"TEXT\">#</field></block></value></block></value></block></statement><next><block type=\"variables_set\" id=\"j2Rospd-x^MjH=i6?E)]\"><field name=\"VAR\" id=\"Aq^^h#[(m4?Ii},h_XGG\">gateway_status</field><value name=\"VALUE\"><block type=\"text\" id=\"hqW6B/VJ|p^pRoQ7ZEqP\"><field name=\"TEXT\"></field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"P*u(RxN-pjQ|n8]5?P]:\" x=\"-588\" y=\"-562\"><field name=\"NAME\">xuLyLUX</field><comment pinned=\"false\" h=\"80\" w=\"160\">Xử lý LED</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"GJ$f9l+3X6Ir$ZYf6[7=\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"):WDIEzLy[*^nrykTL%O\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"eV(O_D#6a(fW)5F;A!9n\"><field name=\"VAR\" id=\"qhk1F1!6K|bi]tJPMpnM\">lux_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"uem}~%AM0)I+@h7.)R}b\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_clear\" id=\"eG~x+w=`DSn/(e=1U0MT\"><next><block type=\"variables_set\" id=\"`]%KM]4[;jrua`QmMVk[\"><field name=\"VAR\" id=\")?Cvo.nVHr0bq%JTdA`R\">LUX</field><value name=\"VALUE\"><block type=\"aiot_light_sensor\" id=\"9_(Eh,/-CL;JAeLc:.*P\"><field name=\"NAME\">pin0</field></block></value><next><block type=\"variables_set\" id=\"*SnG0Qg=/h1tGj!]sS]G\"><field name=\"VAR\" id=\"O.KC!X^D!;N8^!(x3QLS\">LUX_send</field><value name=\"VALUE\"><block type=\"text_join\" id=\"n24aX(M44Zx$#zDTYa=C\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"X[C_QKf.hPPv`1cRndzO\"><field name=\"TEXT\">!BRIGHT:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"i?Y@/ka0PqVYA[i%{F}0\"><field name=\"VAR\" id=\")?Cvo.nVHr0bq%JTdA`R\">LUX</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"mYhaD3[36tm~uA%,+@nq\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"lm^D,iN7]%lQ5zfdE$N%\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"PrmZ8B%[s!b{XIUmkaz[\"><field name=\"VAR\" id=\"O.KC!X^D!;N8^!(x3QLS\">LUX_send</field></block></value><next><block type=\"variables_set\" id=\"xXW*+Nar4XkNEU$IK!,9\"><field name=\"VAR\" id=\"qhk1F1!6K|bi]tJPMpnM\">lux_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"fX+3+:T9xza9{Gvb5KyN\"><field name=\"NUM\">1</field></block></value></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"Mp6Q|#)oXMh(/)OFY;[h\" x=\"587\" y=\"-588\"><field name=\"NAME\">xuLyDoAmDat</field><comment pinned=\"false\" h=\"80\" w=\"160\">Xử lý độ ẩm đất (máy bơm)</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"UK/S4W~?Pmp)u1*MJ!5n\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"sc$W$c?)5!Hj,$st@fHI\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"Yk*aou#EBV;2MGxHaF/`\"><field name=\"VAR\" id=\"#_TE7I8}TW8B-8fsh)*7\">DoAmDat_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"j-ntWmFwTkqV+vo9=2Od\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_clear\" id=\"S)O8r5LAIh[@W%bJ){~|\"><next><block type=\"variables_set\" id=\"f!EKXlq)vj5|eA|V4cD:\"><field name=\"VAR\" id=\"?D`G_bHVDf{m$[[KRZaq\">DoAmDat</field><value name=\"VALUE\"><block type=\"aiot_soil_sensor\" id=\"m5Is~,$YNmPA%GOO!T,{\"><field name=\"NAME\">pin1</field></block></value><next><block type=\"variables_set\" id=\"j1b9M6HdKD]t!(@G-EN8\"><field name=\"VAR\" id=\"VfKb2fd%TG]GGe{UX]n9\">DoAmDat_send</field><value name=\"VALUE\"><block type=\"text_join\" id=\"JOF,||u7(4sBr8Nf,z=5\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"KU,oqlle?B|tc3E)%r#I\"><field name=\"TEXT\">!SOIL:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"wIv!e:o:Ok/,_d!NG}=7\"><field name=\"VAR\" id=\"?D`G_bHVDf{m$[[KRZaq\">DoAmDat</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"/=FL[ViY;;P,NZH;Mg?~\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"$).X4+4b`AJr8JFG([|u\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"y@r|RH]W@2a!RDh%?!7V\"><field name=\"VAR\" id=\"VfKb2fd%TG]GGe{UX]n9\">DoAmDat_send</field></block></value><next><block type=\"variables_set\" id=\"vzkgk:~P=r0_Q~7?VXvl\"><field name=\"VAR\" id=\"#_TE7I8}TW8B-8fsh)*7\">DoAmDat_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"fMy$jUS|^MPe-X3]^%RE\"><field name=\"NUM\">1</field></block></value></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\";GwjB.8~|4Pa5)N6L@HG\" x=\"-1812\" y=\"-462\"><field name=\"NAME\">xuLyYeuCauApp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Xử lý các yêu cầu của app về các thiết bị</comment><statement name=\"STACK\"><block type=\"text_append\" id=\"t9ey]Q64n=ZvNWf6mrUI\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field><value name=\"TEXT\"><shadow type=\"text\" id=\"zoCljoet|`mbLdFtFB[5\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"y4X0B=v)1g7PG;(2rl#~\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field></block></value><next><block type=\"controls_if\" id=\"od~|ZdkbWm3zWrp(P*KS\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"af5F%A-#hxKJ7!H?2;|C\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"Ns@:VniLF,R:4]k4Y?ye\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"lE@6MrJeylgCj[izfcM%\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"UzBJCPMR`4[!EeMbExjf\"><field name=\"TEXT\">!control:0#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"~ja4p2w=;qquzw#nmT#L\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"l1CDpg[-ms%f7{37[%9i\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\";j|[!KXT6E;x*,eH.P0T\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"Ma3|A_8eV`6[OgR,*tOO\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"|X:#?p:^j?:5vHousB!7\"><field name=\"TEXT\">0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"u.Y`^6/7bmZdjVxc^_.!\"><value name=\"string\"><shadow type=\"text\" id=\"GY,/jD~QRAS!6?EE[Yo,\"><field name=\"TEXT\">!control:0#</field></shadow></value></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"M;jhVvs#s~JdT*7M!Z*4\"><value name=\"IF0\"><block type=\"logic_compare\" id=\":@:{kif1X{T{uNoV0Dxm\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"5n]`Ro3W54TAWnsIGdii\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"$0~Rmt3$bKq@a2;-h}8]\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"i8$9)OjHm,Nc7RKM40wj\"><field name=\"TEXT\">!control:1#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"ig08W8oGSG+[|tl3Bv:M\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"0sAhNdbFIa{#xIWWo3{{\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"l`:)A~9i#p(2Z{aH?MqZ\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"yolobit_basic_sleep\" id=\"j.q3Fjby(s-E]xN/HGQ!\"><value name=\"duration\"><shadow type=\"math_number\" id=\"NM8yA$J%3On,H}^/bY;d\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"aiot_minifan\" id=\"o5DT#:O;hx15d!p~Ki$D\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"(m~t58~C%M6KW0XFG-}G\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\" id=\"^-.JA=|uP$_yP=%Wj(`[\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"r/vh9k5U)LV%r:scC?@o\"><field name=\"TEXT\">1</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"Du`SqAbp`s(}Ek1s[L7@\"><value name=\"string\"><shadow type=\"text\" id=\"bh:Lyr?rz]IO2LW*Ng*T\"><field name=\"TEXT\">!control:0#</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"?]pXH)l%:uT*H_xFK~,u\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"+wht+I{)oz1;Hn]Jl,T$\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"HL(mPI2BjP_w63s(FN~i\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"M?fAff{TPd.D3R%l$q0]\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"j#(k,al,u)Im=TrI}Z=p\"><field name=\"TEXT\">!control:2#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"v/rsN;4bb#8-.w`mkY(Z\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"8l!S.Q/P^45}Mx+,51S0\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"2oMUGl5#7syuq9N$6yLd\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"yolobit_basic_sleep\" id=\"*`F9=NH^}ghFKJB9kV[Q\"><value name=\"duration\"><shadow type=\"math_number\" id=\"9e9|,bFDhw]Ck1@ysb3/\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"aiot_minifan\" id=\"9M,$X)rnoMNTPF.l}(-p\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"]V;fEC9T~`Vy%WVUkSI#\"><field name=\"NUM\">50</field></shadow></value><next><block type=\"variables_set\" id=\"C4A?YKI=[L1c%C7M6B.m\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"MT+NFX/Y-z;#ySGi!c;M\"><field name=\"TEXT\">2</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"(6#[f=cVkIAl.qPYSrSC\"><value name=\"string\"><shadow type=\"text\" id=\"eE/1fcp?y.SUF92ZqU}M\"><field name=\"TEXT\">!control:0#</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"OLiG?AK@a!d2pyMVh_rp\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"=ca2)8d;OOiAo7|t_lqp\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"oJr-D.UIDp]5EhlAjHLI\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\":K#6w{c1GF/P[dN;0:i/\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"(f-Iv{*;?K3^GFCQ9Hhi\"><field name=\"TEXT\">!control:3#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"Up/U4N1:Ill!;v,E]!|B\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"t.osQawEWpp+{:3Io_oh\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"Gw0DXH5%*-^Ka9|*h7VM\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"yolobit_basic_sleep\" id=\")|9f*|heIEIPr#3,-c@E\"><value name=\"duration\"><shadow type=\"math_number\" id=\"D`z?)uG^3tTJ(!R4,kV(\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"aiot_minifan\" id=\"KB(ddP|TJ*y?b-4WF+[H\"><field name=\"NAME\">pin2</field><value name=\"percent\"><shadow type=\"math_number\" id=\"b~-/}.gCK9+%bh!uu:_}\"><field name=\"NUM\">75</field></shadow></value><next><block type=\"variables_set\" id=\"dx}.b=$bU)Jr{]X/,*,o\"><field name=\"VAR\" id=\"^r4JMJQZ};5as(gcjV*j\">FAN</field><value name=\"VALUE\"><block type=\"text\" id=\"_IPL4TWss:{Kd[cjwxUJ\"><field name=\"TEXT\">3</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"XB:4avoXyV=hxTUd/ZK2\"><value name=\"string\"><shadow type=\"text\" id=\"g!z$cY*=r3CLciRD(o8W\"><field name=\"TEXT\">!control:0#</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"gEf_3g.raeS*]IkQ{TdS\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"4{lbAFh:+DJ}826bw|zM\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"wT.Lk/f:fFa`;:Qn.fv7\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"8F+ZlHxBnK{A07}e}SDs\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"X{.u)Tf$3;Z/,Y|JcUcS\"><field name=\"TEXT\">!control:4#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"|_Ea5Hz$e:4IB0#5H*xo\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_dual_usb\" id=\"LI/tk0}1?N([Qopj7Mur\"><field name=\"NAME\">pin3</field><value name=\"percent\"><shadow type=\"math_number\" id=\"La4a2$,MRZ~qR(bn0rmN\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"yolobit_pin_write_digital\" id=\"-`N.y@RSdMoEZqqE=+}=\"><field name=\"pin\">3</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"E^QLPkZ`X}Fe(nh)fJ5{\"><field name=\"value\">0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"iy^U%Cvyo6W$;!3O9SUX\"><value name=\"string\"><shadow type=\"text\" id=\"|e`.=`r=`gRCG2FS-1I!\"><field name=\"TEXT\">!control:0#</field></shadow></value><next><block type=\"variables_set\" id=\"JSs27?7!e?,ahw]L0]A,\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field><value name=\"VALUE\"><block type=\"text\" id=\"=G~eZ,2%YQVY,$r}F2Zs\"><field name=\"TEXT\">0</field></block></value></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"dnAwKGdXP4,tRt3VPq{j\"><value name=\"IF0\"><block type=\"logic_compare\" id=\";u|C,z#J,_9sLZ!Uat@q\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"e}-)_8F-GbDYO*s7:v0J\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\":qfs{XT`FL$A$zK+L}or\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"0`!I:3;]J7?Dp21J$`Bs\"><field name=\"TEXT\">!control:5#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"V{Qv`}+PO5:p]2-fI%g0\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_write_digital\" id=\"_SuEP7$9.SdKz3u,(6IP\"><field name=\"pin\">3</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"A%3E;*x^5`i);d:#~nzx\"><field name=\"value\">1</field></block></value><next><block type=\"aiot_dual_usb\" id=\"G~E88hfa5Eha^1=Srkh6\"><field name=\"NAME\">pin3</field><value name=\"percent\"><shadow type=\"math_number\" id=\"0k+g7D8V0!K=9te1V)91\"><field name=\"NUM\">70</field></shadow></value><next><block type=\"xbot_serial_write_string\" id=\"bew842%`9DJM9B0L*o9!\"><value name=\"string\"><shadow type=\"text\" id=\"?B_f2LOZu4az:-H)@R5/\"><field name=\"TEXT\">!control:0#</field></shadow></value><next><block type=\"variables_set\" id=\"K6`D4wxPs+at;Q,+VSHs\"><field name=\"VAR\" id=\"?%AwNs3`EVR[i3Spz)^L\">PUMP</field><value name=\"VALUE\"><block type=\"text\" id=\"MNS!*r0uU1DtjdN_nB0e\"><field name=\"TEXT\">1</field></block></value></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"q*2#y)SGmZE!w8rwP!a_\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"T-w6u@co?xYzE4dH7Ns{\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"aD-b7Yn(gJpF.^0!`[Kk\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\".w/V-~`o9l(}?+[5T~[Z\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"s8A}V,tm`cvlr=fM!4Gi\"><field name=\"TEXT\">!control:6#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"e`L7sv0(pq~37oam!cc7\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"gfI2y$lCO]39@duqNMqc\"><field name=\"port\">pin10</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"_K]@25:m:k`Z)X!z_RSY\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"yolobit_pin_write_digital\" id=\",2mt?@2=lsQU9IBupvwO\"><field name=\"pin\">10</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"E*73+OON0$qgn$Lox2dq\"><field name=\"value\">0</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"M6IlzK]I~}azZh^Q2jOa\"><value name=\"string\"><shadow type=\"text\" id=\"#upnZ+)V3BM%X@?]Eire\"><field name=\"TEXT\">!control:0#</field></shadow></value><next><block type=\"variables_set\" id=\"7Alm!cIyrYFcU7a/$In3\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field><value name=\"VALUE\"><block type=\"text\" id=\"B/S]p}w,`E~`2uVT5VV^\"><field name=\"TEXT\">0</field></block></value></block></next></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"/w]12Z:5iK3QM`]wAxnC\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"gv_rT,vYkEhDnO|P2-U)\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"qUF:NF(Ac2fyYt.gfg!A\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"D[6n`wx*A!wqaGN8u.|G\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"0KcK]aVmp5^5tuiylVuK\"><field name=\"TEXT\">!control:7#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"C@OOXZ_`aSdl0`L5qxaR\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_write_digital\" id=\"Bn[aSh1Y:Ey0Q5kTCkY8\"><field name=\"pin\">10</field><value name=\"output\"><shadow type=\"math_number\" id=\"=*;N~#^`n,JLRY}]$*!8\"><field name=\"NUM\">0</field></shadow><block type=\"yolobit_pin_onoff_value\" id=\"Q*eIfbz=T7shq)gE3Cua\"><field name=\"value\">1</field></block></value><next><block type=\"aiot_led_tiny_set_all\" id=\"nO6YrdUJJ^]r0kxT}_=9\"><field name=\"port\">pin10</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"h}z#ZIz(3P8?xzz}VZkH\"><field name=\"COLOUR\">#ff0000</field></shadow></value><next><block type=\"xbot_serial_write_string\" id=\"6:fTeV@d@3R*+C%|_;h7\"><value name=\"string\"><shadow type=\"text\" id=\"(3E6MSf0w#tA=6%4(@qy\"><field name=\"TEXT\">!control:0#</field></shadow></value><next><block type=\"variables_set\" id=\"05xg7S}A_0.DXrsB+Me:\"><field name=\"VAR\" id=\"O8T6IQ|YBw9(=zoTL1I=\">LED</field><value name=\"VALUE\"><block type=\"text\" id=\"6[GCaSS8amx|YR1CD_Q%\"><field name=\"TEXT\">1</field></block></value></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\" id=\"1/*EF[(cGt*Ey+G`NU+7\"><field name=\"VAR\" id=\"SZtxb[t1s6l%9)Yp}vmd\">gateway_app</field><value name=\"VALUE\"><block type=\"text\" id=\"|-|ttjU5@8;j*:E,l/(a\"><field name=\"TEXT\"></field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"x`k6rh8,ii_0Dcv[5;/r\" x=\"-512\" y=\"-262\"><field name=\"NAME\">xuLyLUXwaiting</field><comment pinned=\"false\" h=\"80\" w=\"160\">Hoạt động khi lux_waiting = 1</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"YiTRN4Er$/zrtb~q;)E4\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"u2X.(j1B1y6{:|sSwvs(\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"@bYH9ei.n$M-LVq-z?c*\"><field name=\"VAR\" id=\"qhk1F1!6K|bi]tJPMpnM\">lux_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"FynQoxgQxzljTAM*s]tT\"><field name=\"NUM\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"text_append\" id=\"HMOt,.BpPb`rv@4$D=)Y\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"TEXT\"><shadow type=\"text\" id=\"7afS.3S|njab:6Kc-?(6\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"Y6}?I3cJaXFzr5JkVFf9\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field></block></value><next><block type=\"controls_if\" id=\"N+#q`hNS_vMAD?K,*+==\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"@b^Eu0D=mxLC;gghd{n{\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"9:.@7ww/Q:a0OZPs7t8-\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"Z@:[ELk}2dK3Jv%cty`?\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"^H/.MH,#NWc9LAoAw`jh\"><field name=\"TEXT\">!BRIGHT:0#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"W1|c=9Qbo4Qt@}c+KAl%\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"5zWo}gsVL}f*y^bOcs/p\"><value name=\"string\"><shadow type=\"text\" id=\"-%(-.y-Wo_;:1:u}jAV9\"><field name=\"TEXT\">LUX OK</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"5mO3E]yL{^Ae4{+!.e/s\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"{u%QY~LD~?66NIpjzb;0\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"R`D=w*pm?2)ZHLbKXB$J\"><field name=\"VAR\" id=\"qhk1F1!6K|bi]tJPMpnM\">lux_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"6P!2zjV^bAkrf;JMQuf~\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"N#P9|**z7as|sp||Y@qz\"><field name=\"VAR\" id=\"o]n%T[EArI|3zl/A`M(i\">LUX_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"EL,R=[TS{C)1[CsRXk9w\"><field name=\"NUM\">0</field></block></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"math_change\" id=\"*|;~zgeAP[!A*S,rw*S}\"><field name=\"VAR\" id=\"o]n%T[EArI|3zl/A`M(i\">LUX_count</field><value name=\"DELTA\"><shadow type=\"math_number\" id=\";o60,o~{Xa[LwXQ5)NuV\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"xbot_serial_write_string\" id=\"]kYJM6`caZo;``fh%=TR\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"AsnFw+tu|hCvo2bi[=:6\"><field name=\"VAR\" id=\"O.KC!X^D!;N8^!(x3QLS\">LUX_send</field></block></value><next><block type=\"controls_if\" id=\"`bMnnUJ$R9.%#,7mUrMr\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"Q:8=ydP;TF{sA`Yo-=(X\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"T|nxzn.fQ(pE6?:}%yW6\"><field name=\"VAR\" id=\"o]n%T[EArI|3zl/A`M(i\">LUX_count</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"BXJuYUawsa=%pnIQYUcp\"><field name=\"NUM\">3</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"7x;_!52.1Ngc{8:p~JM+\"><value name=\"string\"><shadow type=\"text\" id=\"!xxJNc.w`}:R4N=pX}Pu\"><field name=\"TEXT\">Can't send LUX</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"qFxVM/?3cQR*Vq_5npQm\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"y%Y@K~|Z{|V`Y|uDP$n?\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"n|%X$p{%@|*`3=IwaJ)V\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"VALUE\"><block type=\"text\" id=\"k}#m.@qudEPyL01h-pIP\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"5[%P?K5T5K$C2^@`2w2x\"><field name=\"VAR\" id=\"qhk1F1!6K|bi]tJPMpnM\">lux_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"Os(Fk1-]H7-9!laJ^VcS\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"y7nGTm3.j;9|K(]AEV!C\"><field name=\"VAR\" id=\"o]n%T[EArI|3zl/A`M(i\">LUX_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"NXND~?6tqGiKrDT5fA4u\"><field name=\"NUM\">0</field></block></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement></block></next></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"bv33myUx$SB2y7H;fL00\" x=\"587\" y=\"-238\"><field name=\"NAME\">xuLyDoAmDatwaiting</field><comment pinned=\"true\" h=\"80\" w=\"160\">Hoạt động khi DoAmDat_waiting = 1</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"tB!6u5p^?C?:bc4(v.+)\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"}tAQ3!|H_zp6mP%1bX1Q\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"Y@_5T-IRE80#VwBF}~Ha\"><field name=\"VAR\" id=\"#_TE7I8}TW8B-8fsh)*7\">DoAmDat_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"6WA@m(IF`v;;vUv]xWt(\"><field name=\"NUM\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"text_append\" id=\"((xDj?EaG#X2H0ZpV*7W\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"TEXT\"><shadow type=\"text\" id=\"7afS.3S|njab:6Kc-?(6\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"dJ/mu2HF;/gH!%lA*ZDo\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field></block></value><next><block type=\"controls_if\" id=\"@c!}m^8yp6-NS:2WmMG8\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"VpRE}(Hi0sk:qtlYXp`c\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"Mzw-TU%^Ql3(vG.Ch@11\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"X?O#Bd~+izIA+Rhg~Tjf\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"gnjc{/Y?HGnRGi(`~DWs\"><field name=\"TEXT\">!SOIL:0#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"ng:$k_wi?7z3*`QZjAJY\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"(,kFSvun-q0`yCboSwvi\"><value name=\"string\"><shadow type=\"text\" id=\"A;mY}n-;@hNsKW*=**)r\"><field name=\"TEXT\">SOIL OK</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"xQ,*nMmNcA@)))#_Hvj1\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"^h7A7,tO,!J!N?u/tsCX\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"E7JxU_013!pM4!slz4Nu\"><field name=\"VAR\" id=\"#_TE7I8}TW8B-8fsh)*7\">DoAmDat_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"x|6Cb!gXMprZ%Z_2m?S,\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"(S/|HgM)$mC,~kpk.=kC\"><field name=\"VAR\" id=\"QINH+#uuVmkZCOP}uf|M\">DoAmDat_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"Pj:#ORfPN9OL@axiUU[C\"><field name=\"NUM\">0</field></block></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"math_change\" id=\"ZoK{^2rO`bTL!?2%N(k:\"><field name=\"VAR\" id=\"QINH+#uuVmkZCOP}uf|M\">DoAmDat_count</field><value name=\"DELTA\"><shadow type=\"math_number\" id=\"M4Enqs_B^4hvNi9,l2?Y\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"xbot_serial_write_string\" id=\"ttYwfM,4vq-E?}y*#Zy=\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"}$Au`tX/kJ:q2(McWq23\"><field name=\"VAR\" id=\"VfKb2fd%TG]GGe{UX]n9\">DoAmDat_send</field></block></value><next><block type=\"controls_if\" id=\";p^,z+Q7PLHW}|GT}*^u\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"QoCHTf6fcmh?2:r}!^wH\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\";Rm.s]Y_s^%O4GUlad-B\"><field name=\"VAR\" id=\"QINH+#uuVmkZCOP}uf|M\">DoAmDat_count</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"=7FaI{s`!G_fX.uApQ9.\"><field name=\"NUM\">3</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"e9Fb};b(9|-gT7u[c,%m\"><value name=\"string\"><shadow type=\"text\" id=\"cdDz)jx^xhLEDcs[`aUg\"><field name=\"TEXT\">Can't send SOIL</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"I`Sk+Cc3SOlj+7=A3-OC\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"l8mu+h`Ats1r.E!`C#la\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\",nfVhAuNfSCdGfOjN]a4\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"VALUE\"><block type=\"text\" id=\"tzO-wx3!0()e[/8c`L#B\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"EaHPWa7ZRHtN{p|2n/RX\"><field name=\"VAR\" id=\"#_TE7I8}TW8B-8fsh)*7\">DoAmDat_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\":N@v@J7w#MgS*:P~Q[h5\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"(2SB?fq]k|a-,HhOnnZC\"><field name=\"VAR\" id=\"QINH+#uuVmkZCOP}uf|M\">DoAmDat_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"d78z@Tyza%Lw5*OKaQ|_\"><field name=\"NUM\">0</field></block></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement></block></next></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"]`Lr)2m0kj%q1w)).0?T\" x=\"-338\" y=\"238\"><field name=\"NAME\">xuLyNhietDo_DoAmKK</field><comment pinned=\"false\" h=\"80\" w=\"160\">Xử lý nhiệt độ và độ ẩm không khí</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"F~EIS!aj5sqE:T@]((Gd\"><value name=\"IF0\"><block type=\"logic_operation\" id=\"H*G}`=6H:9;MD+:.e$iD\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\" id=\"JuBR!(4;N](vy5gZh@`j\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"_,Bf0*cf;1ec|E?scE?-\"><field name=\"VAR\" id=\"I3%ULv9Q+*xAcrz_y/V^\">nhietDo_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"D}pr#)VgcUW7(G^6_9YV\"><field name=\"NUM\">0</field></block></value></block></value><value name=\"B\"><block type=\"logic_compare\" id=\"Q3:an7=Jts29W|f!R{0e\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\")6*(1NH.US9,`GPNg?YC\"><field name=\"VAR\" id=\"0e0bMV1g{{pk=/|5ozSh\">doAmKK_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"AFD636~S9mgXj2MFx?2)\"><field name=\"NUM\">0</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_clear\" id=\"ywU-pXT51SB?0D+qfR6b\"><next><block type=\"aiot_dht_measure\" id=\"B$!UP5~qE3V8pSybRU9D\"><next><block type=\"variables_set\" id=\"L~=PBOLx{v@i$D:[C48h\"><field name=\"VAR\" id=\"EczX!9?.T=`D0cW2n:Cu\">NhietDo</field><value name=\"VALUE\"><block type=\"aiot_dht_read\" id=\")(rU|YdupA.s!lQ4euE!\"><field name=\"DATA\">TEMP</field></block></value><next><block type=\"variables_set\" id=\"pD`yHV}6N#Ig}QVe*Pbq\"><field name=\"VAR\" id=\"5aa_ERIFR7NPPoeRsEHJ\">NhietDo_send</field><value name=\"VALUE\"><block type=\"text_join\" id=\"W/M!k=J4d-w76L.xSn6*\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"hcG~xP9f?8FAc/wB*9qP\"><field name=\"TEXT\">!TEMP:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\":yq8B,eh0;~X_(46%j04\"><field name=\"VAR\" id=\"EczX!9?.T=`D0cW2n:Cu\">NhietDo</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"9]Y!uuF0A@P5dm@+P~dV\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"ZAQPDwi.ym,_CEthxc7m\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"{m}qu-:DvGr_Qg$,u`8s\"><field name=\"VAR\" id=\"5aa_ERIFR7NPPoeRsEHJ\">NhietDo_send</field></block></value><next><block type=\"variables_set\" id=\"#^`HO=VdL)(?SX[xz%P#\"><field name=\"VAR\" id=\"I3%ULv9Q+*xAcrz_y/V^\">nhietDo_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"g)i~VCk#J#JZer_}#.of\"><field name=\"NUM\">1</field></block></value><next><block type=\"variables_set\" id=\"E]g5=Z#6NL:ZV]mWNd2j\"><field name=\"VAR\" id=\"pAEpYKcKGV,5|7LnRDC5\">DoAmKK</field><value name=\"VALUE\"><block type=\"aiot_dht_read\" id=\"mK%PBY(`v^ha?0F7shLv\"><field name=\"DATA\">HUMID</field></block></value><next><block type=\"variables_set\" id=\"B3{=2K=9Hni0?Nq6%@y^\"><field name=\"VAR\" id=\"j@08+GlVqdfOs6eE.jP$\">DoAmKK_send</field><value name=\"VALUE\"><block type=\"text_join\" id=\"Q2Skq?EE0BF2p{93GUPc\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"NG|~f?G!K`q,xvI2H$s!\"><field name=\"TEXT\">!HUMID:</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"1h~z@R=:+DF5I[,Wt!Pr\"><field name=\"VAR\" id=\"pAEpYKcKGV,5|7LnRDC5\">DoAmKK</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"$EQ6@u#Ox7}wn=kHsQPu\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"xbot_serial_write_string\" id=\"=l=hBRo3U~;}ogUKNj$K\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"AJ-w9-8qoaZ=~TYWRyG|\"><field name=\"VAR\" id=\"j@08+GlVqdfOs6eE.jP$\">DoAmKK_send</field></block></value><next><block type=\"variables_set\" id=\"724G/K|BAF^yysHQ7.Ul\"><field name=\"VAR\" id=\"0e0bMV1g{{pk=/|5ozSh\">doAmKK_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"*.#[g5rm5C=H!T,JB*c/\"><field name=\"NUM\">1</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"iFEusjq+J/A3W279%A9~\" x=\"-412\" y=\"812\"><field name=\"NAME\">xuLyNhietDowaiting</field><comment pinned=\"true\" h=\"80\" w=\"160\">Hoạt động khi nhietDo_waiting = 1</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"Z{NB`3hamAG[nYk%RjcB\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"lhV1_K4wdeBtN-E%jnPf\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"~BAayxE?aaxV/q=liPEZ\"><field name=\"VAR\" id=\"I3%ULv9Q+*xAcrz_y/V^\">nhietDo_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"mvBiu[YFm@5`3,cE[;0X\"><field name=\"NUM\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"text_append\" id=\".ICBd|},exjFV{3alA,@\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"TEXT\"><shadow type=\"text\" id=\"7afS.3S|njab:6Kc-?(6\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"jfNei=Kjn{:QetSE7pjj\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field></block></value><next><block type=\"controls_if\" id=\"PfJ2[=vO8tn:@n;stNeD\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"tm`:-Ii!h9{lEWbNzcK]\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"nswT/^aT*2DU@QUQhfn5\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"Y^Lz_I%l!7Dp;^,]^qNc\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"F2EIRc6)zM#P0gm%*^cS\"><field name=\"TEXT\">!TEMP:0#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"{YMCdk?bA%ZEPtL`a-Q)\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"EQY.Y53i{kTuFCCml{;,\"><field name=\"VAR\" id=\"I3%ULv9Q+*xAcrz_y/V^\">nhietDo_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"_CM{B;IPx#?my,8,fM2#\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"uCjtayIjqOvZVjy8xh9e\"><field name=\"VAR\" id=\"{J65ngVylro]hHXE}Je.\">nhietDo_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"/EgzELZvj=y7Ims?`k(S\"><field name=\"NUM\">0</field></block></value><next><block type=\"aiot_lcd1602_display\" id=\"5i{ct6e~S.$]9:AhtPIg\"><value name=\"string\"><shadow type=\"text\" id=\"~-k1`hB0@z$LFaEVu,#J\"><field name=\"TEXT\">TEMP OK</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"48$FtV@S^X#0zd`Ub.w.\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"vMsO4X,PzLDDXU[j/*A+\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"math_change\" id=\"+Q}K!Ky4Cka:mbM#KW_;\"><field name=\"VAR\" id=\"{J65ngVylro]hHXE}Je.\">nhietDo_count</field><value name=\"DELTA\"><shadow type=\"math_number\" id=\"PZ{[h-C.flh;^t,c1%aD\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"xbot_serial_write_string\" id=\"7#hV5)hKe,:JKGKLnvrU\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"rUOuToS}}tt~buU6n+~M\"><field name=\"VAR\" id=\"5aa_ERIFR7NPPoeRsEHJ\">NhietDo_send</field></block></value><next><block type=\"controls_if\" id=\"^pG@|c?NxOPaKWJ=OZ/]\"><value name=\"IF0\"><block type=\"logic_compare\" id=\";JTRY.]?|ggM.!Rveb86\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"_XB}T8a3]z(R`s!I@w?C\"><field name=\"VAR\" id=\"{J65ngVylro]hHXE}Je.\">nhietDo_count</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"3_Bxx!_u?y?S2oH=pqQI\"><field name=\"NUM\">3</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"rBRBEfh$.Tr8IP=dQ}%s\"><value name=\"string\"><shadow type=\"text\" id=\"Ndi%1yl(sm@Sp9]b8b|]\"><field name=\"TEXT\">Can't send TEMP</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\";fCQ^Ql/1170QQucVoQ;\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"*@%ESCTY_Oc0M2Os#hx^\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"AIz$%jV]a?neLF0r%8yX\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"VALUE\"><block type=\"text\" id=\"p`Baz9CmCCh@BGh(qfKk\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"lt$$/22Z!W.M(q8M2u`)\"><field name=\"VAR\" id=\"I3%ULv9Q+*xAcrz_y/V^\">nhietDo_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"7F^~;1_)j)(*^hJaPT5s\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"$ETN:Ij{4%?IaJm6=;as\"><field name=\"VAR\" id=\"{J65ngVylro]hHXE}Je.\">nhietDo_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"bd@B}0i}|lqa0hTiCb?f\"><field name=\"NUM\">0</field></block></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement></block></next></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"(71PJebYFF+E^=QwQR1e\" x=\"638\" y=\"863\"><field name=\"NAME\">xuLyDoAmKKwaiting</field><comment pinned=\"true\" h=\"80\" w=\"160\">Hoạt động khi doAmKK_waiting = 1</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"k;ZJhsI),QpzFJp[K_rl\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"cV!4Of,|$~-=@@EfLaH2\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\")`@;48_@;Y#jEn+PCr~h\"><field name=\"VAR\" id=\"0e0bMV1g{{pk=/|5ozSh\">doAmKK_waiting</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"Kan3I8^R.Hd`B#hXKE~N\"><field name=\"NUM\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"text_append\" id=\"d9S8Dy%tf0j7)2=u)qn_\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"TEXT\"><shadow type=\"text\" id=\"7afS.3S|njab:6Kc-?(6\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"n[0_~#b2|2BcDdM}~t0n\"><field name=\"VAR\" id=\"7SUBG9_Bblh)%A?Iws=y\">read_serial</field></block></value><next><block type=\"controls_if\" id=\":|[v{Px9ybrRi}hqQb/j\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"F/j*kUGhye^?kQV9m1IW\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"text_indexOf\" id=\"$~tZ(.-W*}G#imhbLEo,\"><field name=\"END\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"#fR,A:B/{._qD`5lo73+\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field></block></value><value name=\"FIND\"><shadow type=\"text\" id=\"B,!w^Ca-X#5=He`wDz,`\"><field name=\"TEXT\">#</field></shadow><block type=\"text\" id=\"ILiH]QjERQF/}:Gxe6Cq\"><field name=\"TEXT\">!HUMID:0#</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"=0xnaKL*3rxRW/_F0,xX\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"|-LQt;PU*G?{!PgA]f[0\"><value name=\"string\"><shadow type=\"text\" id=\"2zgGzH/T`-@u/-YQ6G?k\"><field name=\"TEXT\">HUMID OK</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"BkSCm**2rh7~l^DA4kSu\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"7OA02oqT|Z:1j8A,~b7n\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\" id=\"[)Kd@M,@/,YpTMswM?hZ\"><field name=\"VAR\" id=\"0e0bMV1g{{pk=/|5ozSh\">doAmKK_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"KH+-FJ;C@_=m+J52^,_6\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"YoS%H+yybCmKTP5TIwCo\"><field name=\"VAR\" id=\"}!p{23tJ2wUGO:jF1hp`\">doAmKK_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"b*e7j^lrD)*R=ftaoocS\"><field name=\"NUM\">0</field></block></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"math_change\" id=\"kc?8`;MXrDs?{NH1s^7?\"><field name=\"VAR\" id=\"}!p{23tJ2wUGO:jF1hp`\">doAmKK_count</field><value name=\"DELTA\"><shadow type=\"math_number\" id=\"rZBOa]iej9w}M!;sL.`#\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"xbot_serial_write_string\" id=\"?[J}!u]H({%aBN)qkae:\"><value name=\"string\"><shadow type=\"text\" id=\"Sn87$Qc/ql/ZQG_nXVpF\"><field name=\"TEXT\">!TEMP:{NhietDo}#</field></shadow><block type=\"variables_get\" id=\"f=S-|!W,[sZKdGHGdId6\"><field name=\"VAR\" id=\"j@08+GlVqdfOs6eE.jP$\">DoAmKK_send</field></block></value><next><block type=\"controls_if\" id=\"Licp[ShaE8IRmzsn/n^I\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"pv)t{@jOSFRYO;_g+gzX\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"!bh[`j)pu,cF9dfA@si/\"><field name=\"VAR\" id=\"}!p{23tJ2wUGO:jF1hp`\">doAmKK_count</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"=~+qLaF9fsM:ZDX84K(H\"><field name=\"NUM\">3</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"yJw?r|7QknX@4)eV`:L%\"><value name=\"string\"><shadow type=\"text\" id=\"m:{al-6H`pq^?B6Toh6$\"><field name=\"TEXT\">Can't send HUMID</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"$b5L;y{w=.Urr#SCzxcM\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"bA~%1e%FZL2JV0HfhH!T\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\" id=\"SKeZ:Cf3A!*-=0Y!c{F/\"><field name=\"VAR\" id=\"y4`0-F_|X+p:]vFk:aB-\">gateway_resp</field><value name=\"VALUE\"><block type=\"text\" id=\"KZ^wKBJJ71ei.sE#[[P,\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\" id=\"q$dM}Y{v`Z6DXVG;C0Nq\"><field name=\"VAR\" id=\"0e0bMV1g{{pk=/|5ozSh\">doAmKK_waiting</field><value name=\"VALUE\"><block type=\"math_number\" id=\"ba4)DT}~Iz1pMpWCHhbV\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"C-GWYHg2?c=n~:U|o]af\"><field name=\"VAR\" id=\"}!p{23tJ2wUGO:jF1hp`\">doAmKK_count</field><value name=\"VALUE\"><block type=\"math_number\" id=\"EoAa]3iAH001(7||9YOp\"><field name=\"NUM\">0</field></block></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement></block></next></block></statement></block></statement></block></xml>","python":"from yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom event_manager import *\nimport time\nfrom aiot_ir_receiver import *\nfrom aiot_rgbled import RGBLed\nimport sys\nimport uselect\nfrom aiot_lcd1602 import LCD1602\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\n\nevent_manager.reset()\n\naiot_ir_rx = IR_RX(Pin(pin16.pin, Pin.IN)); aiot_ir_rx.start();\n\ntiny_rgb = RGBLed(pin10.pin, 4)\n\ndef on_ir_receive_callback(t_C3_ADn_hi_E1_BB_87u, addr, ext):\n  global read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK\n  if aiot_ir_rx.get_code() == IR_REMOTE_0:\n    if FAN != '0':\n      pin2.write_analog(round(translate(0, 0, 100, 0, 1023)))\n      FAN = '0'\n      print((''.join([str(x) for x in ['!FAN:', FAN, '#']])), end =' ')\n    if PUMP != '0':\n      pin3.write_analog(round(translate(0, 0, 100, 0, 1023)))\n      pin3.write_digital((0))\n      PUMP = '0'\n      print((''.join([str(x2) for x2 in ['!PUMP:', PUMP, '#']])), end =' ')\n    if LED != '0':\n      tiny_rgb.show(0, hex_to_rgb('#000000'))\n      pin10.write_digital((0))\n      LED = '0'\n      print((''.join([str(x3) for x3 in ['!LED:', LED, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_1:\n    pin2.write_analog(round(translate(100, 0, 100, 0, 1023)))\n    time.sleep_ms(3)\n    if FAN != '1':\n      pin2.write_analog(round(translate(25, 0, 100, 0, 1023)))\n      FAN = '1'\n    print((''.join([str(x4) for x4 in ['!FAN:', FAN, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_2:\n    if FAN != '2':\n      pin2.write_analog(round(translate(50, 0, 100, 0, 1023)))\n      FAN = '2'\n    print((''.join([str(x5) for x5 in ['!FAN:', FAN, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_3:\n    if FAN != '3':\n      pin2.write_analog(round(translate(75, 0, 100, 0, 1023)))\n      FAN = '3'\n    print((''.join([str(x6) for x6 in ['!FAN:', FAN, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_4:\n    if FAN != '0':\n      pin2.write_analog(round(translate(0, 0, 100, 0, 1023)))\n      FAN = '0'\n      print((''.join([str(x7) for x7 in ['!FAN:', FAN, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_5:\n    if PUMP != '1':\n      pin3.write_digital((1))\n      pin3.write_analog(round(translate(75, 0, 100, 0, 1023)))\n      PUMP = '1'\n    print((''.join([str(x8) for x8 in ['!PUMP:', PUMP, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_6:\n    if PUMP != '0':\n      pin3.write_digital((0))\n      pin3.write_analog(round(translate(0, 0, 100, 0, 1023)))\n      PUMP = '0'\n    print((''.join([str(x9) for x9 in ['!PUMP:', PUMP, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_7:\n    if LED != '1':\n      pin10.write_digital((1))\n      tiny_rgb.show(0, hex_to_rgb('#ff0000'))\n      LED = '1'\n    print((''.join([str(x10) for x10 in ['!LED:', LED, '#']])), end =' ')\n  if aiot_ir_rx.get_code() == IR_REMOTE_8:\n    if LED != '0':\n      tiny_rgb.show(0, hex_to_rgb('#000000'))\n      pin10.write_digital((0))\n      LED = '0'\n    print((''.join([str(x11) for x11 in ['!LED:', LED, '#']])), end =' ')\n  aiot_ir_rx.clear_code()\n\naiot_ir_rx.on_received(on_ir_receive_callback)\n\ndef on_event_timer_callback_Q_S_w_l_W():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK\n  xuLyLUXwaiting()\n  xuLyDoAmDatwaiting()\n  xuLyNhietDowaiting()\n  xuLyDoAmKKwaiting()\n\nevent_manager.add_timer_event(300, on_event_timer_callback_Q_S_w_l_W)\n\ndef on_event_timer_callback_B_H_Y_F_L():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK\n  xuLyLUX()\n  xuLyDoAmDat()\n  xuLyNhietDo_DoAmKK()\n\nevent_manager.add_timer_event(2000, on_event_timer_callback_B_H_Y_F_L)\n\ndef read_terminal_input():\n  spoll=uselect.poll()        # Set up an input polling object.\n  spoll.register(sys.stdin, uselect.POLLIN)    # Register polling object.\n\n  input = ''\n  if spoll.poll(0):\n    input = sys.stdin.read(1)\n\n    while spoll.poll(0):\n      input = input + sys.stdin.read(1)\n\n  spoll.unregister(sys.stdin)\n  return input\n\ndef on_event_timer_callback_A_P_F_F_I():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK\n  read_serial = str(read_serial) + str(read_terminal_input())\n  xuLyQueryStatus()\n  xuLyYeuCauApp()\n  read_serial = ''\n\nevent_manager.add_timer_event(1000, on_event_timer_callback_A_P_F_F_I)\n\n# Xử lý các câu hỏi của gateway về status các thiết bị\ndef xuLyQueryStatus():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  gateway_status = str(gateway_status) + str(read_serial)\n  if gateway_status.find('!FAN:3#') + 1 != 0:\n    print((''.join([str(x12) for x12 in ['!FAN:', FAN, '#']])), end =' ')\n  if gateway_status.find('!PUMP:3#') + 1 != 0:\n    print((''.join([str(x13) for x13 in ['!PUMP:', PUMP, '#']])), end =' ')\n  if gateway_status.find('!LED:3#') + 1 != 0:\n    print((''.join([str(x14) for x14 in ['!LED:', LED, '#']])), end =' ')\n  gateway_status = ''\n\naiot_lcd1602 = LCD1602()\n\n# Xử lý LED\ndef xuLyLUX():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  if lux_waiting == 0:\n    aiot_lcd1602.clear()\n    LUX = round(translate((pin0.read_analog()), 0, 4095, 0, 100))\n    LUX_send = ''.join([str(x15) for x15 in ['!BRIGHT:', LUX, '#']])\n    print(LUX_send, end =' ')\n    lux_waiting = 1\n\n# Xử lý độ ẩm đất (máy bơm)\ndef xuLyDoAmDat():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  if DoAmDat_waiting == 0:\n    aiot_lcd1602.clear()\n    DoAmDat = round(translate((pin1.read_analog()), 0, 4095, 0, 100))\n    DoAmDat_send = ''.join([str(x16) for x16 in ['!SOIL:', DoAmDat, '#']])\n    print(DoAmDat_send, end =' ')\n    DoAmDat_waiting = 1\n\n# Xử lý các yêu cầu của app về các thiết bị\ndef xuLyYeuCauApp():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  gateway_app = str(gateway_app) + str(read_serial)\n  if gateway_app.find('!control:0#') + 1 != 0:\n    pin2.write_analog(round(translate(0, 0, 100, 0, 1023)))\n    FAN = '0'\n    print('!control:0#', end =' ')\n  if gateway_app.find('!control:1#') + 1 != 0:\n    pin2.write_analog(round(translate(100, 0, 100, 0, 1023)))\n    time.sleep_ms(3)\n    pin2.write_analog(round(translate(25, 0, 100, 0, 1023)))\n    FAN = '1'\n    print('!control:0#', end =' ')\n  if gateway_app.find('!control:2#') + 1 != 0:\n    pin2.write_analog(round(translate(100, 0, 100, 0, 1023)))\n    time.sleep_ms(3)\n    pin2.write_analog(round(translate(50, 0, 100, 0, 1023)))\n    FAN = '2'\n    print('!control:0#', end =' ')\n  if gateway_app.find('!control:3#') + 1 != 0:\n    pin2.write_analog(round(translate(100, 0, 100, 0, 1023)))\n    time.sleep_ms(3)\n    pin2.write_analog(round(translate(75, 0, 100, 0, 1023)))\n    FAN = '3'\n    print('!control:0#', end =' ')\n  if gateway_app.find('!control:4#') + 1 != 0:\n    pin3.write_analog(round(translate(0, 0, 100, 0, 1023)))\n    pin3.write_digital((0))\n    print('!control:0#', end =' ')\n    PUMP = '0'\n  if gateway_app.find('!control:5#') + 1 != 0:\n    pin3.write_digital((1))\n    pin3.write_analog(round(translate(70, 0, 100, 0, 1023)))\n    print('!control:0#', end =' ')\n    PUMP = '1'\n  if gateway_app.find('!control:6#') + 1 != 0:\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n    pin10.write_digital((0))\n    print('!control:0#', end =' ')\n    LED = '0'\n  if gateway_app.find('!control:7#') + 1 != 0:\n    pin10.write_digital((1))\n    tiny_rgb.show(0, hex_to_rgb('#ff0000'))\n    print('!control:0#', end =' ')\n    LED = '1'\n  gateway_app = ''\n\n# Hoạt động khi lux_waiting = 1\ndef xuLyLUXwaiting():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  if lux_waiting == 1:\n    gateway_resp = str(gateway_resp) + str(read_serial)\n    if gateway_resp.find('!BRIGHT:0#') + 1 != 0:\n      aiot_lcd1602.move_to(0, 0)\n      aiot_lcd1602.putstr('LUX OK')\n      lux_waiting = 0\n      LUX_count = 0\n    else:\n      LUX_count = (LUX_count if isinstance(LUX_count, (int, float)) else 0) + 1\n      print(LUX_send, end =' ')\n      if LUX_count == 3:\n        aiot_lcd1602.move_to(0, 0)\n        aiot_lcd1602.putstr(\"Can't send LUX\")\n        gateway_resp = ''\n        lux_waiting = 0\n        LUX_count = 0\n\n# Hoạt động khi DoAmDat_waiting = 1\ndef xuLyDoAmDatwaiting():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  if DoAmDat_waiting == 1:\n    gateway_resp = str(gateway_resp) + str(read_serial)\n    if gateway_resp.find('!SOIL:0#') + 1 != 0:\n      aiot_lcd1602.move_to(0, 0)\n      aiot_lcd1602.putstr('SOIL OK')\n      DoAmDat_waiting = 0\n      DoAmDat_count = 0\n    else:\n      DoAmDat_count = (DoAmDat_count if isinstance(DoAmDat_count, (int, float)) else 0) + 1\n      print(DoAmDat_send, end =' ')\n      if DoAmDat_count == 3:\n        aiot_lcd1602.move_to(0, 0)\n        aiot_lcd1602.putstr(\"Can't send SOIL\")\n        gateway_resp = ''\n        DoAmDat_waiting = 0\n        DoAmDat_count = 0\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\n# Xử lý nhiệt độ và độ ẩm không khí\ndef xuLyNhietDo_DoAmKK():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  if nhietDo_waiting == 0 and doAmKK_waiting == 0:\n    aiot_lcd1602.clear()\n    aiot_dht20.read_dht20()\n    NhietDo = aiot_dht20.dht20_temperature()\n    NhietDo_send = ''.join([str(x17) for x17 in ['!TEMP:', NhietDo, '#']])\n    print(NhietDo_send, end =' ')\n    nhietDo_waiting = 1\n    DoAmKK = aiot_dht20.dht20_humidity()\n    DoAmKK_send = ''.join([str(x18) for x18 in ['!HUMID:', DoAmKK, '#']])\n    print(DoAmKK_send, end =' ')\n    doAmKK_waiting = 1\n\n# Hoạt động khi nhietDo_waiting = 1\ndef xuLyNhietDowaiting():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  if nhietDo_waiting == 1:\n    gateway_resp = str(gateway_resp) + str(read_serial)\n    if gateway_resp.find('!TEMP:0#') + 1 != 0:\n      nhietDo_waiting = 0\n      nhietDo_count = 0\n      aiot_lcd1602.move_to(0, 0)\n      aiot_lcd1602.putstr('TEMP OK')\n    else:\n      nhietDo_count = (nhietDo_count if isinstance(nhietDo_count, (int, float)) else 0) + 1\n      print(NhietDo_send, end =' ')\n      if nhietDo_count == 3:\n        aiot_lcd1602.move_to(0, 0)\n        aiot_lcd1602.putstr(\"Can't send TEMP\")\n        gateway_resp = ''\n        nhietDo_waiting = 0\n        nhietDo_count = 0\n\n# Hoạt động khi doAmKK_waiting = 1\ndef xuLyDoAmKKwaiting():\n  global t_C3_ADn_hi_E1_BB_87u, read_serial, gateway_status, gateway_app, DoAmDat_waiting, gateway_resp, doAmKK_waiting, lux_waiting, LUX, DoAmDat, nhietDo_waiting, FAN, LUX_send, DoAmDat_send, LUX_count, DoAmDat_count, NhietDo, nhietDo_count, doAmKK_count, PUMP, NhietDo_send, LED, DoAmKK_send, DoAmKK, aiot_ir_rx, aiot_lcd1602, aiot_dht20, tiny_rgb\n  if doAmKK_waiting == 1:\n    gateway_resp = str(gateway_resp) + str(read_serial)\n    if gateway_resp.find('!HUMID:0#') + 1 != 0:\n      aiot_lcd1602.move_to(0, 1)\n      aiot_lcd1602.putstr('HUMID OK')\n      doAmKK_waiting = 0\n      doAmKK_count = 0\n    else:\n      doAmKK_count = (doAmKK_count if isinstance(doAmKK_count, (int, float)) else 0) + 1\n      print(DoAmKK_send, end =' ')\n      if doAmKK_count == 3:\n        aiot_lcd1602.move_to(0, 1)\n        aiot_lcd1602.putstr(\"Can't send HUMID\")\n        gateway_resp = ''\n        doAmKK_waiting = 0\n        doAmKK_count = 0\n\nif True:\n  display.scroll('IoT')\n  DoAmDat_waiting = 0\n  doAmKK_waiting = 0\n  nhietDo_waiting = 0\n  lux_waiting = 0\n  LUX_count = 0\n  DoAmDat_count = 0\n  doAmKK_count = 0\n  nhietDo_count = 0\n  FAN = '0'\n  LED = '0'\n  PUMP = '0'\n  gateway_resp = ''\n  gateway_app = ''\n  gateway_status = ''\n  read_serial = ''\n\nwhile True:\n  event_manager.run()\n  display.scroll('O')\n  time.sleep_ms(10)\n","name":"san_pham_cuoi","extensions":[{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"}],"device":"yolobit"}